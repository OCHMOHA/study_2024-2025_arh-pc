---
## Front matter
title: "Лабораторная работа No4"
subtitle: "Архитектура компьютера"
author: "Оушен Мухаммад Ламин"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Освоить процедуры компиляции и сборки программ, написанных на ассемблере
NASM.

# Задание

**1.** В каталоге ~/work/arch-pc/lab04 с помощью команды cp создать копию файла
hello.asm с именем lab4.asm
**2.** С помощью любого текстового редактора внести изменения в текст программы в
файле lab4.asm так, чтобы вместо Hello world! на экран выводилась строка с
фамилией и именем.
**3.** Оттранслировать полученный текст программы lab4.asm в объектный файл.
Выполнить компоновку объектного файла и запустить получившийся иполняемый
файл.
**4.** Скопировать файлы hello.asm и lab4.asm в локальный репозиторий в каталог
~/work/study/2023-2024/“Архитектура компьютера”/arch-pc/labs/lab04/.
Загрузить файлы на Github


# Теоретическое введение

# Вопросы для самопроверки :

1. **Какие основные отличия ассемблерных программ от программ на языках
высокого уровня?**
- Ассемблерные программы ближе к машинному коду и требуют более детального
управления оборудованием. В отличие от языков высокого уровня, таких как
Python или Java, которые предоставляют абстракции и автоматизацию,
ассемблерные программы требуют явного указания каждой команды и
обращения к памяти.
**2. В чём состоит отличие инструкции от директивы на языке ассемблера?**
- Инструкции являются командами, которые процессор выполняет(например, MOV
, ADD), тогда как директивы не преобразуются в машинный код, а служат для
управления компилятором(например, .data, .text ).
**3. Перечислите основные правила оформления программ на языке
ассемблера.**
- Каждая команда должна располагаться на отдельной строке.
- Синтаксис чувствителен к регистру, т.е. MOV и mov будут восприниматься как
разные команды.
- Метки должны начинаться с буквы, знака подчеркивания или точки.
- Комментарии начинаются с ; и продолжаются до конца строки.


**4. Каковы этапы получения исполняемого файла?**
- Набор текста программы в текстовом редакторе и сохранение в файл с
расширением .asm.
- Трансляция исходного файла в объектный код с помощью транс-лятора
(например, NASM).
- Компоновка объектного файла в исполняемый файл с помощью компоновщика
(например, LD).
- Запуск получившегося исполняемого файла.
**5. Каково назначение этапа трансляции?**
- Этап трансляции преобразует текст программы, написанной на ассемблере, в
объектный код, который может быть использован для создания исполняемого
файла. На этом этапе проверяются синтаксические ошибки и создаются объектные
файлы.
**6. Каково назначение этапа компоновки?**
- Этап компоновки объединяет один или несколько объектных файлов, а также
библиотеки в единый исполняемый файл. Компоновщик разрешает внешние
ссылки и размещает код в нужных адресах памяти.


**7. Какие файлы могут создаваться при трансляции программы, какие из них
создаются по умолчанию?**
- При трансляции могут создаваться объектные файлы (обычно с расширением .o),
файлы листинга (с расширением .lst), а также файлы с отладочной информацией.
По умолчанию создается только объектный файл.
**8. Каковы форматы файлов для NASM и LD?**
- Для NASM: форматы могут включать elf, elf64, bin и другие, в зависимости от
архитектуры и операционной системы.
- Для LD: форматы включают elf_i386 , elf_x86_64 и другие.
# Выполнение лабораторной работы


Создадим каталог для работы с программами на языке ассемблера NASM.


[Рис 4.1: команда mkdir](image/Рис 4.1.jpg){#fig:001 width=70%}


Перейдем в созданный каталог.

[Рис 4.2: переход в каталог](image/Рис 4.2.jpg){#fig:001 width=70%}

Создадим текстовый файл с именем hello.asm.

[Рис 4.3: создание текстового файла](image/Рис 4.3.jpg){#fig:001 width=70%}

Откроем этот файл с помощью любого текстового редактора, например, gedit.

[Рис 4.4: редактор gedit](image/Рис 4.4.jpg){#fig:001 width=70%}

Введем в него следующий текст

[Рис 4.5: введение текста](image/Рис 4.5.jpg){#fig:001 width=70%}

Для компиляции приведённого выше текста программы «Hello World» необходимо
написать (nasm -f elf hello.asm). Проверяем наличие нужных файлов с помощью
команды ls.

[Рис 4.6: компиляция текста](image/Рис 4.6.jpg){#fig:001 width=70%}

Выполняем следующую команду (nasm -o obj.o -f elf -g -l list.lst hello.asm). Также
проверяем наличие необходимых файлов.

[Рис 4.7: компиляция файла](image/Рис 4.7.jpg){#fig:001 width=70%}

Объектный файл необходимо передать на обработку компоновщику следующим
образом.

[Рис 4.8: паредача файла на обработку](image/Рис 4.8.jpg){#fig:001 width=70%}

Выполняем следующую команду (ld -m elf_i386 obj.o -o main).

[Рис 4.9: команда ld -m elf_i386 obj.o -o main](image/Рис 4.9.jpg){#fig:001 width=70%}

Запустим на выполнение созданный исполняемый файл.

[Рис 4.10: итог запуска](image/Рис 4.10.jpg){#fig:001 width=70%}

с помощью команды cp создайте копию файла.

[Рис 4.11: hello.asm с именем lab4.asm](image/Рис 4.11.jpg){#fig:001 width=70%}

запишем теперь свою фимилию и имя.

[Рис 4.12: фимилию и имя](image/Рис 4.12.jpg){#fig:001 width=70%}

Запустим получившийся исполняемый файл.

[Рис 4.13: второй запуск и итог](image/Рис 4.13.jpg){#fig:001 width=70%}


# Выводы

Был освоен процесс компиляции и сборки программ, написанных на ассемблере
NASM.


::: {#refs}
:::
